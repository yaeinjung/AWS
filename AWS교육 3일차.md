<h2>AWS교육 3일차</h2>

<h4>자동화</h4>

* 인프라자동화/배포자동화 크게 두가지



<h4>AWS CloudFormation</h4>

* Infra Provisioning Tool

* 코드로 인프라를 관리 :: `코드형 인프라` (=`IaC`)

* 되도록 yaml형태로 작성

* 템플릿(코드)으로 인프라를 그대로 다시 만들어낼 수 있음

  * ex. 배포 (테스트->운영)

* 템플릿 업데이트시 모든 인프라에 수정사항 반영 가능

  * 하나의 템플릿으로 환경에 따라 다르게 적용 가능

  <h4>AWS Quick Start</h4>

  * yaml파일로 제공
  * 산업별로 인프라를 쉽게 갖다쓸 수 있게 만든 서비스


<h4>Ops Works</h4>

* configuration management 툴



<h4>캐싱</h4>

* <b>정적</b>인 데이터에 적합
* 클라이언트 (브라우저) , 서버(웹서버)  둘 다 가능
* 사용자가 데이터를 요청하면 캐싱로케이션에서 데이터 있는지 확인
  * 있으면 바로 리턴
  * 없으면 저장소가서 가지고옴
* <b>정적인 컨텐츠</b> 캐싱해야함
* 컨텐츠 만료방법
  * 보통 사용자가 TTL로 만기시켜야함
  * 객체이름변경 >> 이름이 바뀌면 강제로 캐싱을 다시함 >> 소스코드를 바꿔야하니까 번거로움
  * 객체무효화 : 다시 처음부터 캐싱을 해야함. 무거운작업, 정말 급할때만 사용, 되도록 지양
* Cloud Front 는 CDN역할, 앞단에 방화벽 두기 가능

* 세션정보
  * 세션정보를 ELB에 저장시킬때
    * 웹서버에 저장시키면 문제가 생김 >> 한쪽으로 몰릴 수 있음(트래픽 발생)
    * 따라서 Dynamo DB같은 곳으로 세션정보를 따로 뺄 수 있음
    * Dynamo DB의 경우 밀리초까지 응답단위가 나타날 수 있기 때문에 Dynamo DB앞에 ACC(캐시서버)를 따로 둘 수 있음(마이크로까지 단축 가능)
* 레이지로딩 : 메모리에 보관된 데이터를 찾고 있으면 가져옴, 없으면 DB에서 가져오고 메모리에 저장
  * 항상 캐시쪽에는 최신의 데이터가 있음
  * DB사이즈만큼 메모리가 있어야함, 모든데이터를 다 유지할 수 없으니까 효율적으로 유지하려면 주기적으로 밀어내야함 >> <u>TTL이용</u>



<h4>결합해제</h4>

서로 밀결합 되어있으면 서비스 추가할수록 결합도가 높아지기 때문에 결합을 해제해야함

InernetFacingLoadBalancer / Internal LB

* 동기적 데이터처리 -> ELB

* 비동기식 데이터처리 -> SQS 메세지큐 (대규모 시스템에 적합)



<h4>마이크로서비스</h4>

보통 하나의 트랜젝션>> 마이크로서비스

* 컨테이너는 OS에 대한 가상화
* 서버리스 : 서버를 관리하지 않음
  * 이벤트가 발생할때만 동작
  * 애플리케이션에 집중하기 좋음
  * 마이크로서비스에 적합
* <b>Lambda</b>
  * 이벤트 발생시 람다 등장
  * 엣지로케이션에도 동작하게 할 수 있음
  * 단점 : 코드를 15분까지만 돌릴 수 있음. 15분 이상 코드는 돌아갈 수 없다
  * 끊임없이 돌아가는 작업에는 적합하지 않음
  * 요즘에는 인프라 관리하는데 많이 쓰임
  * VPC안에서 동작함

